---
layout: post
title: RailsのMongoidでMongodbがtimeoutする
date: '2015-05-04T17:20:00.000+09:00'
author: s sato
tags:
- Rails
- Mongodb
modified_time: '2015-08-01T13:17:33.694+09:00'
blogger_id: tag:blogger.com,1999:blog-1054230703994559763.post-3423873916959677172
blogger_orig_url: http://satomemocho.blogspot.com/2015/05/railsmongoidmongodbtimeout.html
---

<p>Mongodbはデフォルトで10分でカーソルがタイムアウトしてしまう<br>バッチ処理などの長時間の処理が途中で止まってしまう。</p><p>次のように書くと途中で止まってしまう。</p><pre><code>Product.each{|product|<br />    # 何かの長時間かかる処理<br />}<br /></code></pre><p>10分を越える可能性のある処理は次のようにしましょう</p><pre><code>Product.no_timeout.each{|product|<br />    # 何かの長時間かかる処理<br />}<br /></code></pre>